<!DOCTYPE html>
<html lang="en">

<%- include('./partials/header.ejs') %> 

  <main id="main">

    <!-- ======= Services Section ======= -->
    <section id="services" class="services">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>US Financial News Articles</h2>
          <p>The data set is rich with metadata, containing the source of the article,
             the time it was published to the author details and Images related to every article.
            Excellent for text analysis and combined with any other related entity dataset,
             it could give some astounding results.</p>
        </div>
        
        <div class="row">
          <% if (news.docs.length > 0){ %>
            <% news.docs.forEach(article => { %>
            
            <div class="col-md-6 p-3" data-aos="zoom-in" data-aos-delay="100">
            <div class="icon-box iconbox-blue" style="height: 50vh;">
              <h3> <a href="<%= article.url%>"><%= article.title %> </a></h3>
              <% if (article.text.length>300){ %> 
                <p class="text-justify"><%= article.text.substring(0, 400)+"...." %> </p>
              <% } else {%>
                <p class="text-justify"><%= article.text %> </p>
              <% } %>
              <br>
             <p class="text-muted text-right"><%= article.author %></p>
             <p class="text-muted text-right">Published:  <%= article.published.toDateString() %></p>
            </div>
          </div>
          <% }) %> 
        </div>

          <nav class="mx-auto">
            <ul class="pagination">
              <% if (news.hasPrevPage){ %>
                <li class="page-item"><a class="page-link" href="?page=<%= news.previousPage %>">Previous</a></li>
                <% } else {%>
                <li class="disabled page-item"><a class="page-link" href="#">Previous </a></li>
              <% } %> 
              <% for (x=1;x<=news.totalPages;x++) { %> 
                <% if (x < news.page+3 && x > news.page-3){ %>
                  <% if (x == news.page){ %>
                    <li class="page-item active"><a class="page-link" href="#"><%= x %></a></li>
                  <% } else {%>
                    <li class="page-item"><a class="page-link" href="?page=<%= x %>"><%=x%> </a></li>
                  <% } %>
                <% } %>  
              <% } %> 
              <% if (news.hasNextPage){ %>
                <li class="page-item"><a class="page-link" href="?page=<%= news.nextPage %>">Next</a></li>
              <% } else {%>
                <li class="disabled page-item"><a class="page-link" href="#">Next</a></li>
              <% } %> 
            </ul>
            <p> <%= news.pagingCounter %> - <%= news.pagingCounter+9 %> out of <%= news.totalDocs %></p>
          </nav>
         <% } else { %>
          
          <p>There is no data in the Database</p>

        <% } %> 
          



      </div>
    </section><!-- End Services Section -->

  </main><!-- End #main -->


  <div id="preloader"></div>
  <a href="#" class="back-to-top"><i class="bx bx-up-arrow-alt"></i></a>

  <!-- Vendor JS Files -->
  <script src="/assets/vendor/jquery/jquery.min.js"></script>
  <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="/assets/vendor/php-email-form/validate.js"></script>
  <script src="/assets/vendor/waypoints/jquery.waypoints.min.js"></script>
  <script src="/assets/vendor/counterup/counterup.min.js"></script>
  <script src="/assets/vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="/assets/vendor/venobox/venobox.min.js"></script>
  <script src="/assets/vendor/aos/aos.js"></script>

  <!-- Template Main JS File -->
  <script src="/assets/js/main.js"></script>

</body>

</html>